environment = "dev"

# Find your object ID with: az ad signed-in-user show --query id -o tsv

# Backend APIs
backends = {
  # Portal API: Uses default roles, creates Azure AD groups for role assignments
  portal = {
    display_name       = "Portal API"
    create_role_groups = true
    # app_roles not specified -> uses defaults (user, viewer, admin)
    # Optional: owners = ["00000000-0000-0000-0000-000000000000"]
  }

  # Billing API: Custom roles, uses existing groups from identity team
  billing = {
    display_name = "Billing API"
    app_roles = {
      reader = {
        display_name = "Reader"
        description  = "View invoices and billing history"
      }
      admin = {
        display_name = "Admin"
        description  = "Manage billing settings and payments"
      }
    }
    role_group_assignments = {
      reader = "11111111-1111-1111-1111-111111111111"
      admin  = "22222222-2222-2222-2222-222222222222"
    }
    # Optional: enable_claims_mapping = true  # Requires Azure AD Premium
  }
}

# SPAs - can have multiple SPAs per backend
spas = {
  # Two SPAs sharing the Portal backend
  portal-web = {
    display_name  = "Portal Web"
    backend       = "portal"
    redirect_uris = ["https://portal.example.com", "http://localhost:3000"]
  }
  portal-admin = {
    display_name  = "Portal Admin"
    backend       = "portal"
    redirect_uris = ["https://admin.portal.example.com"]
  }

  # Single SPA for Billing
  billing-web = {
    display_name  = "Billing Web"
    backend       = "billing"
    redirect_uris = ["https://billing.example.com"]
  }
}
